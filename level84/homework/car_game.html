<!DOCTYPE html>
<html>
<head>
<title>Bunny Game</title>
<style>
  body {
    margin: 0;
    background: #e6f7ff;
    overflow: hidden;
  }
  canvas {
    display: block;
    margin: auto;
    background: #ffffff;
    border: 3px solid #333;
  }
</style>
</head>
<body>

<canvas id="gameCanvas" width="600" height="700"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let bunny = {
  x: 270,
  y: 620,
  width: 60,
  height: 60,
  speed: 7
};

let carrot = {
  x: Math.random() * 560,
  y: 0,
  width: 30,
  height: 50,
  speed: 5
};

let rock = {
  x: Math.random() * 560,
  y: -300,
  radius: 20,
  speed: 5
};

let score = 0;
let gameOver = false;

let keys = {};

document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

function drawBunny() {
  ctx.fillStyle = "green";
  ctx.beginPath();
  ctx.ellipse(bunny.x + 30, bunny.y + 30, 30, 30, 0, 0, Math.PI * 2);
  ctx.fill();
}

function drawCarrot() {
  ctx.fillStyle = "orange";
  ctx.fillRect(carrot.x, carrot.y, carrot.width, carrot.height);
}

function drawRock() {
  ctx.fillStyle = "gray";
  ctx.beginPath();
  ctx.arc(rock.x, rock.y, rock.radius, 0, Math.PI * 2);
  ctx.fill();
}

function collision(rect1, rect2) {
  return rect1.x < rect2.x + rect2.width &&
         rect1.x + rect1.width > rect2.x &&
         rect1.y < rect2.y + rect2.height &&
         rect1.y + rect1.height > rect2.y;
}

function update() {
  if (gameOver) return;

  if (keys["ArrowLeft"] && bunny.x > 0) bunny.x -= bunny.speed;
  if (keys["ArrowRight"] && bunny.x < canvas.width - bunny.width) bunny.x += bunny.speed;

  carrot.y += carrot.speed;
  rock.y += rock.speed;

  if (carrot.y > canvas.height) {
    carrot.y = 0;
    carrot.x = Math.random() * 560;
  }

  if (rock.y > canvas.height) {
    rock.y = -200;
    rock.x = Math.random() * 560;
  }

  if (collision(bunny, carrot)) {
    score++;
    carrot.y = 0;
    carrot.x = Math.random() * 560;
  }

  let rockBox = {
    x: rock.x - rock.radius,
    y: rock.y - rock.radius,
    width: rock.radius * 2,
    height: rock.radius * 2
  };

  if (collision(bunny, rockBox)) {
    gameOver = true;
  }
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  drawBunny();
  drawCarrot();
  drawRock();

  ctx.fillStyle = "black";
  ctx.font = "24px Arial";
  ctx.fillText("Score: " + score, 20, 40);

  if (gameOver) {
    ctx.font = "40px Arial";
    ctx.fillText("GAME OVER!", 180, 350);
  }
}

function gameLoop() {
  update();
  draw();
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>
